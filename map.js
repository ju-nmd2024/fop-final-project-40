import Entity from "./entities/entity.js";
import { getFramesPos, drawSprite } from "../utils.js";

export default class Map extends Entity {
    constructor() {
        super();
        this.tileSize = 16,

        this.tileMap1 = null;
        this.tileMap2 = null;
        this.tileMap2 = null;

        this.tiles1 = [
            [7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7],
            [7, 7, 7, 7, 7, 7, 7, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7],
            [7, 7, 6, 7, 7, 7, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 9, 9, 9, 9, 9, 9, 9, 9, 7, 7, 7, 7, 7, 7, 7],
            [7, 7, 7, 6, 7, 7, 6, 6, 7, 6, 6, 7, 7, 0, 0, 7, 7, 7, 7, 6, 7, 7, 0, 0, 0, 0, 0, 0, 7, 7, 7, 6, 6, 7],
            [7, 7, 7, 6, 7, 6, 6, 7, 7, 7, 7, 7, 7, 0, 0, 0, 0, 0, 7, 7, 7, 7, 0, 0, 0, 0, 0, 0, 7, 7, 6, 6, 6, 6],
            [7, 7, 7, 6, 7, 6, 6, 7, 6, 7, 6, 6, 7, 7, 7, 0, 0, 0, 0, 7, 7, 7, 0, 0, 0, 0, 0, 0, 7, 6, 6, 6, 6, 6],
            [7, 7, 7, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 0, 0, 0, 0, 7, 7, 0, 0, 0, 0, 7, 0, 0, 11, 6, 6, 6, 6, 6],
            [7, 7, 6, 6, 6, 8, 9, 7, 7, 7, 7, 7, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 6, 6, 6, 6, 7],
            [7, 7, 6, 6, 6, 15, 0, 7, 7, 7, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 7, 0, 0, 0, 0, 0, 11, 6, 6, 6, 6, 6],
            [7, 7, 6, 6, 6, 15, 0, 0, 0, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 7, 7, 0, 0, 0, 0, 0, 11, 6, 6, 6, 7, 6],
            [7, 7, 7, 6, 6, 15, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 24, 24, 17, 7, 7, 0, 0, 0, 0, 0, 11, 6, 6, 6, 6, 6],
            [7, 7, 7, 6, 6, 15, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 25, 25, 23, 7, 0, 0, 0, 0, 0, 7, 11, 6, 6, 6, 6, 6],
            [7, 7, 7, 6, 6, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, 19, 20, 21, 0, 0, 0, 0, 0, 0, 0, 11, 6, 6, 6, 6, 6],
            [7, 7, 7, 6, 6, 15, 0, 7, 7, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 6, 6, 6, 6, 7],
            [7, 7, 6, 6, 6, 15, 7, 7, 7, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 11, 6, 6, 6, 6, 7],
            [6, 6, 6, 6, 6, 15, 7, 7, 7, 7, 0, 0, 0, 0, 0, 7, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 11, 7, 6, 6, 7, 7],
            [6, 6, 6, 6, 7, 15, 6, 7, 7, 7, 0, 0, 0, 7, 7, 7, 7, 7, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 7, 6, 6, 6, 7],
            [6, 6, 6, 7, 7, 12, 13, 13, 13, 13, 13, 13, 13, 13, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 6, 7],
            [6, 6, 7, 7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 6, 6, 6, 7, 7, 7, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 6],
            [6, 6, 6, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 7, 6, 6, 6, 6, 6, 6, 6, 7, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7],
            [6, 6, 6, 6, 7, 7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 6, 7, 7, 7, 7],
            [6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7]
        ];
    }
    load() {
        this.tileMap1 = loadImage("./assets/level1.png");
    }
    loadAnim() {
        this.frames = getFramesPos(6, 5, this.tileSize, this.tileSize);

        // tiles
        this.anims = {
            "grass": 0,
            "noClipGrass": 6, "tree": 7, "fencetop1": 8, "fencetop2": 9, "fencetop3": 10, "fenceright": 11,
            "fencebot1": 12, "fencebot2": 13, "fencebot3": 14, "fenceleft": 15, "rooftop1": 16, "rooftop3": 17,
            "houseleft": 18, "door": 19, "wall": 20, "houseright": 21, "roofleft": 22, "roofright": 23,
            "rooftop2": 24, "roof": 25
        };
    }
    setup() {
        this.loadAnim();
    }


    lvl1(camera) {
        push();
        imageMode(CORNER);
        noStroke();
        translate(Math.floor(camera.x - 220), Math.floor(camera.y - 220));
        for (let rowIndex = 0; rowIndex < this.tiles1.length; rowIndex++) {

            for (let colIndex = 0; colIndex < this.tiles1[rowIndex].length; colIndex++) {

                this.tiles(this.tiles1[rowIndex][colIndex], colIndex * this.tileSize, rowIndex * this.tileSize);
            }
        }
        pop();
    }
    lvl2() {
        // draw map
    }
    lvl3() {
        // draw map
    }



    tiles(tile, x, y) {
        drawSprite(
            this.tileMap1,
            x,
            y,
            this.frames[tile].x,
            this.frames[tile].y,
            this.tileSize,
            this.tileSize,
        );
    }
}